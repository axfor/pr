# pr
# make test


======================================================================
                    MEMORY COMPARISON REPORT
======================================================================
  Test Data: 16.21 MB (16,600 messages)

----------------------------------------------------------------------
  HeapAlloc (Go Runtime) - Unit: MB
----------------------------------------------------------------------
  Mode                        Min        Max        Avg      Final
  -------------------- ---------- ---------- ---------- ----------
  WITHOUT ReleasePayload       1.67      32.02      17.38      23.03
  WITH ReleasePayload        1.69      12.58       6.96       6.81

----------------------------------------------------------------------
  RSS (Internal gopsutil) - Unit: MB
----------------------------------------------------------------------
  Mode                        Min        Max        Avg      Final
  -------------------- ---------- ---------- ---------- ----------
  WITHOUT ReleasePayload      18.53      68.80      44.64      68.80
  WITH ReleasePayload       18.77      36.83      30.69      36.83

----------------------------------------------------------------------
  RSS (External ps aux) - Unit: MB
----------------------------------------------------------------------
  Mode                        Min        Max        Avg
  -------------------- ---------- ---------- ----------
  WITHOUT ReleasePayload       0.03      65.72      27.35
  WITH ReleasePayload        0.11      36.41      25.98

======================================================================
                      MEMORY SAVINGS ANALYSIS
======================================================================
  Max HeapAlloc:
    WITHOUT:      32.02 MB
    WITH:         12.58 MB
    SAVED:        19.44 MB  (60.7%)

  Avg HeapAlloc:
    WITHOUT:      17.38 MB
    WITH:          6.96 MB
    SAVED:        10.41 MB  (59.9%)

  Max RSS:
    WITHOUT:      68.80 MB
    WITH:         36.83 MB
    SAVED:        31.97 MB  (46.5%)

  Max RSS (External):
    WITHOUT:      65.72 MB
    WITH:         36.41 MB
    SAVED:        29.31 MB  (44.6%)

----------------------------------------------------------------------
  Memory Amplification (Max Memory / Data Size)
----------------------------------------------------------------------
  Metric                         WITHOUT         WITH    Reduction
  ------------------------- ------------ ------------ ------------
  HeapAlloc/DataSize               1.98x        0.78x        1.20x
  RSS/DataSize                     4.24x        2.27x        1.97x

======================================================================